#CONFIG qapng_BINARY_DIR DEV_OUTPUT_DIR ARCH TARGET OS_WINDOWS OS_MACOS

message(STATUS "Copy QtApng target.")
message(STATUS "CONFIG=${CONFIG}")
message(STATUS "qapng_BINARY_DIR=${qapng_BINARY_DIR}")
message(STATUS "DEV_OUTPUT_DIR=${DEV_OUTPUT_DIR}")
message(STATUS "ARCH=${ARCH}")
message(STATUS "TARGET=${TARGET}")
message(STATUS "OS_WINDOWS=${OS_WINDOWS}")
message(STATUS "OS_MACOS=${OS_MACOS}")

if(${CONFIG} STREQUAL "Debug")
	if (EXISTS "${qapng_BINARY_DIR}/${CONFIG}/qapngd.dll")
		if (EXISTS "${DEV_OUTPUT_DIR}/Debug/bin/64bit/plugins/imageformats")
			message(STATUS "${qapng_BINARY_DIR}/${CONFIG}/qapngd.dll" -> "${DEV_OUTPUT_DIR}/Debug/bin/64bit/plugins/imageformats/qapngd.dll")
			file(COPY "${qapng_BINARY_DIR}/${CONFIG}/qapngd.dll" DESTINATION "${DEV_OUTPUT_DIR}/Debug/bin/64bit/plugins/imageformats/")
		elseif (EXISTS "${DEV_OUTPUT_DIR}/Debug/bin/64bit/imageformats")
			message(STATUS "${qapng_BINARY_DIR}/${CONFIG}/qapngd.dll" -> "${DEV_OUTPUT_DIR}/Debug/bin/64bit/imageformats/qapngd.dll")
			file(COPY "${qapng_BINARY_DIR}/${CONFIG}/qapngd.dll" DESTINATION "${DEV_OUTPUT_DIR}/Debug/bin/64bit/imageformats/")
		endif()
	endif()
else()
	if (EXISTS "${qapng_BINARY_DIR}/${CONFIG}/qapng.dll")
		if (EXISTS "${DEV_OUTPUT_DIR}/Release/bin/64bit/plugins/imageformats")
			message(STATUS "${qapng_BINARY_DIR}/${CONFIG}/qapng.dll" -> "${DEV_OUTPUT_DIR}/Release/bin/64bit/plugins/imageformats/qapng.dll")
			file(COPY "${qapng_BINARY_DIR}/${CONFIG}/qapng.dll" DESTINATION "${DEV_OUTPUT_DIR}/Release/bin/64bit/plugins/imageformats/")
		elseif (EXISTS "${DEV_OUTPUT_DIR}/Release/bin/64bit/imageformats")
			message(STATUS "${qapng_BINARY_DIR}/${CONFIG}/qapng.dll" -> "${DEV_OUTPUT_DIR}/Release/bin/64bit/imageformats/qapng.dll")
			file(COPY "${qapng_BINARY_DIR}/${CONFIG}/qapng.dll" DESTINATION "${DEV_OUTPUT_DIR}/Release/bin/64bit/imageformats/")
		endif()
	endif()
endif()
